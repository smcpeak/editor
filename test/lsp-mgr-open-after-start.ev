// lsp-mgr-open-after-start.ev
// Open the LSP manager only after starting LSP.

// I had a bug where doing that would show an empty table because the
// ctor didn't populate it.

// In editor with language-test.cc open.
CheckFocusWidget("window1.frame1.editorFrame.m_editorWidget")
CheckQuery("window1.frame1.editorFrame.m_editorWidget" "documentFileName" "language-test.cc")

// Start LSP.
Shortcut("window1.m_menuBar" "Alt+L")
KeyPress("window1.m_menuBar.lspMenu" "Key_A" "a")

// Open the file.
Shortcut("window1.m_menuBar.lspMenu.lspOpenOrUpdateFile" "F7")

// Open the dialog.
Shortcut("window1.m_menuBar" "Alt+L")
KeyPress("window1.m_menuBar.lspMenu" "Key_M" "m")
CheckFocusWidget("LSPServersDialog.m_table")

// Check its contents.
CheckTableWidgetContents("LSPServersDialog.m_table" [
  ["local" "N/A" "C++" "1" "LSP_PS_NORMAL"]
])

// Close the dialog.
FocusKeyPR("Key_Escape" "\u{1B}")
CheckFocusWidget("window1.frame1.editorFrame.m_editorWidget")


// EOF
